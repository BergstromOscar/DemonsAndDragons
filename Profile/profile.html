<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PVQPC4Q6');</script>
    <!-- End Google Tag Manager -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="../style.css">
    <link id="favicon" rel="shortcut icon" type="image/png" href="../favicon.png" />
    <style>
    .profile-display {
        background-color: rgba(47, 53, 47, 0.8); /* Transparent grey background */
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 8px;
    }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PVQPC4Q6"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header>
            <img src="../DADIcon.png" id="icon" alt="Main Icon">
            <h1>Your Profile</h1>
            <img src="../profile-icon.png" id="profile-icon" alt="Profile Icon">
    </header>
    <main>
        <div class="column" id="left-column">
        <h2>Profile Information</h2>
        <div id="profile-display">
            <p><strong>Name:</strong> <span id="display-name"></span></p>
            <p><strong>Surname:</strong> <span id="display-surname"></span></p>
            <p><strong>Age:</strong> <span id="display-age"></span></p>
            <p><strong>Email:</strong> <span id="display-email"></span></p>
            <button id="edit-profile-button">Edit</button>
        </div>
        <form id="profile-form" style="display:none;">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name"><br><br>
            <label for="surname">Surname:</label>
            <input type="text" id="surname" name="surname"><br><br>
            <label for="age">Age:</label>
            <input type="number" id="age" name="age"><br><br>
            <label for="email">Email:</label>
            <input type="email" id="email" name="email"><br><br>
            <button type="button" id="save-profile-button">Save Profile</button>
        </form>
    </div>
        <button onclick="window.location.href='../index.html'">Back to Home</button>
    </main>
    <footer>
        <p>&copy; 2024 Demons And Dragons</p>
    </footer>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Load profile data from local storage if it exists
            function loadProfileData() {
                if (localStorage.getItem('profileData')) {
                    const profileData = JSON.parse(localStorage.getItem('profileData'));
                    $('#display-name').text(profileData.name);
                    $('#display-surname').text(profileData.surname);
                    $('#display-age').text(profileData.age);
                    $('#display-email').text(profileData.email);
                    $('#profile-display').show();
                    $('#profile-form').hide();
                } else {
                    $('#profile-display').hide();
                    $('#profile-form').show();
                }
            }

            loadProfileData();

            // Save profile data to local storage
            $('#save-profile-button').click(function() {
                const profileData = {
                    name: $('#name').val(),
                    surname: $('#surname').val(),
                    age: $('#age').val(),
                    email: $('#email').val()
                };
                localStorage.setItem('profileData', JSON.stringify(profileData));
                alert('Profile saved successfully!');
                loadProfileData();
            });

            // Show the form to edit profile data
            $('#edit-profile-button').click(function() {
                const profileData = JSON.parse(localStorage.getItem('profileData'));
                $('#name').val(profileData.name);
                $('#surname').val(profileData.surname);
                $('#age').val(profileData.age);
                $('#email').val(profileData.email);
                $('#profile-display').hide();
                $('#profile-form').show();
            });
        });
        function checkSignInStatus() {
    if (!localStorage.getItem("signedIn")) {
        window.location.href = "../SignInSignUp/signin.html"; // Redirect to sign-in/sign-up page
    }
}
    </script>
</body>
</html>
